<template name="addProperty">
  <section class="wrapper">
    {{> breadcrumbs}}    
    <form role="form" id="propertyForm" class="form-submit">
      <div class="row">
        <div class="col-sm-9">
          <input type="hidden" name="propertyid" value="{{myProperty._id}}">
          <input type="hidden" name="existingPhotos" value="{{glueArray myProperty.photos}}">
          <section class="panel">
            <header class="panel-heading">
              <span class="h4"><i class="fa fa-list-alt"></i> 基本信息</span>
            </header>
            <div class="panel-body">
              <p class="text-muted"><i class="fa fa-exclamation-circle text-danger"></i> 为必填项目</p>                        
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label>地址 <i class="fa fa-exclamation-circle text-danger"></i></label>
                    <input type="text" class="form-control" id="submit-title" placeholder="请输入地址" name="address" value="{{myProperty.address}}">
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <label>邮编 <i class="fa fa-exclamation-circle text-danger"></i></label>
                    <div class="input-group">
                      <span class="input-group-addon">S</span>
                      <input type="text" class="form-control" id="submit-postcode" name="postcode" value="{{myProperty.postcode}}">
                    </div>
                  </div>
                </div>
                <div class="col-sm-3">
                  <div class="form-group">
                    <label>价格 <i class="fa fa-exclamation-circle text-danger"></i></label>
                    <div class="input-group">
                      <span class="input-group-addon">S$</span>
                      <input type="text" class="form-control" id="submit-price" name="price" value="{{myProperty.price}}">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="form-group padder">
                  <label>更多描述</label>
                  <textarea class="form-control" id="submit-description" rows="3" name="description">{{myProperty.description}}</textarea>
                </div>
              </div>
            </div>
          </section>
          <section class="panel">
            <header class="panel-heading">
              <span class="h4"><i class="fa fa-newspaper-o"></i> 概览</span>
            </header>
            <div class="panel-body">
              <div class="row">
                <div class="col-sm-8">
                  <div class="form-group">
                    <label>区域</label>
                    <select id="district" name="district" class="form-control">
                      {{#each arrayify district}}
                      <option value="{{key}}" {{ifSelected key ../myProperty.district}}>{{key}} - {{value}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>房屋类型</label>
                    <select name="property-type" id="property-type" class="form-control">
                      {{#each arrayify ptypes}}
                      <option value="{{key}}" {{ifSelected key ../myProperty.propertyType}}>{{value}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>有无中介费 <i class="fa fa-exclamation-circle text-danger"></i></label>
                    <div class="row padder">
                      <div class="radio col-xs-6">
                        <label class="radio-custom">
                          <input type="radio" id="has-agent-true" value="1" name="has-agent-fee" {{ifRadioChecked 1 myProperty.hasAgentFee}}>
                          <i class="fa fa-circle-o"></i>
                          有
                        </label>
                      </div>
                      <div class="radio col-xs-6" style="margin-top:10px">
                        <label class="radio-custom">
                          <input type="radio" id="has-agent-false" value="0" name="has-agent-fee" {{ifRadioChecked 0 myProperty.hasAgentFee}}>
                          <i class="fa fa-circle-o"></i>
                          无
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>出租方式</label>
                    <select name="rent-type" id="rent-type" class="form-control">
                      <option value="0" {{ifSelected '0' myProperty.rentType}}>单间</option>
                      <option value="1" {{ifSelected '1' myProperty.rentType}}>整套</option>
                    </select>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>房间类型</label>
                    <select name="room-type" id="room-type" class="form-control">
                      {{#each arrayify rtypes}}
                      <option value="{{key}}" {{ifSelected key ../myProperty.roomType}}>{{value}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>入住时间</label>
                    <input class="input-sm input-s datepicker form-control" size="16" type="text" data-date-format="yyyy/mm/dd" >
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>房间</label>
                    <select name="bedroom" class="form-control">
                      {{#each bedroomNum}}
                      <option value="{{this}}" {{ifSelected this ../myProperty.bedroom}}>{{this}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>卫生间</label>
                    <select name="bathroom" class="form-control">
                      {{#each bathroomNum}}
                      <option value="{{this}}" {{ifSelected this ../myProperty.bathroom}}>{{this}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>面积</label>
                    <div class="input-group">
                      <input type="text" class="form-control" name="property-area" value="{{myProperty.area}}">
                      <span class="input-group-addon">m<sup>2</sup></span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>最近地铁线</label>
                    <select name="mrtlines" id="mrtlines" class="form-control">
                      {{#each arrayify mrtlines}}
                      <option value="{{key}}" {{ifLineMatch key ../myProperty.mrt}}>{{value.niceName}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>站名</label>
                    <select name="stations" id="stations" class="form-control">
                      {{#each arrayify stations}}
                      <option value="{{key}}" {{ifSelected key ../myProperty.mrt}}>{{key}} - {{value}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
        <div class="col-sm-3">
          <aside class="submit-step">
            <div class="description">
              <h4>输入您的房产信息</h4>
              <p>请尽可能准确地描述您的房产, 以便其他用户查找</p>
            </div>
          </aside><!-- /.submit-step -->
        </div>
      </div>
      <div class="row">
        <div class="col-sm-9">

        </div>
      </div>
    </form>
  </section>
</template>

<template name="addPropertyBak">
  <style>
    .dropzone .dz-default.dz-message {
      background: url("/packages/awatson1978_dropzone/public/images/spritemap.png") 70px -300px !important;
      width:400px;
    }
  </style>
  <div class="page-gradient">
    {{> breadcrumbs}}
    <div class="container">
      <header>
        <h1>
          {{#if myProperty}}
          <i class="fa fa-pencil-square"></i> 编辑
          {{else}}
          <i class="fa fa-bullhorn"></i> 发布
          {{/if}}
        </h1>
      </header>
      <form role="form" id="propertyForm" class="form-submit">
        <input type="hidden" name="propertyid" value="{{myProperty._id}}">
        <input type="hidden" name="existingPhotos" value="{{glueArray myProperty.photos}}">
        <div class="row">
          <div class="block">
            <div class="col-md-9 col-sm-9">
              <section id="submit-form">
                <section>
                  <div class="row">
                    <div class="block clearfix">
                      <div class="col-md-12 col-sm-12">
                        <section id="summary">
                          <header><h2><i class="fa fa-newspaper-o"></i> 概览</h2></header>


                          <div class="row">
                            <div class="col-md-4 col-sm-4">
                              <div class="form-group" id="mrtLinesDiv">
                                <label for="mrtlines">最近地铁线</label>
                                <select name="mrtlines" id="mrtlines">
                                  {{#each arrayify mrtlines}}
                                  <option value="{{key}}" {{ifLineMatch key ../myProperty.mrt}}>{{value.niceName}}</option>
                                  {{/each}}
                                </select>
                              </div><!-- /.form-group -->
                            </div><!-- /.col-md-4 -->

                            <div class="col-md-6 col-sm-6">
                              <div class="form-group">
                                <label for="submit-property-type">站名</label>
                                <select name="stations" id="stations">
                                  {{#each arrayify stations}}
                                  <option value="{{key}}" {{ifSelected key ../myProperty.mrt}}>{{key}} - {{value}}</option>
                                  {{/each}}
                                </select>
                              </div><!-- /.form-group -->
                            </div><!-- /.col-md-4 -->
                          </div><!-- /.row -->
                        </section><!-- /#summary -->
                      </div><!-- /.col-md-12 -->

                    </div><!-- /.block -->
                  </div><!-- /.row -->
                </section>

                {{#with myProperty.photos}}
                <section class="block">
                  <header><h2><i class="fa fa-picture-o"></i> 已上传图片</h2></header>
                  <div class="row">
                    {{#each this}}
                    <div class="col-xs-6 col-md-3">
                      <div class="thumbnail" style="text-align:center">
                        <img src="{{getImageURL this}}" >
                        <a href="#" class="existingImage" data-id="{{this}}"><i class="delete fa fa-trash-o"></i></a>
                      </div>
                    </div>
                    {{/each}}
                  </div>
                </section>
                {{/with}}

                <section class="block" id="gallery">
                  <header><h2><i class="fa fa-picture-o"></i> 图片上传</h2></header>
                  <div class="center">
                    <div class="form-group">
                      <img src="/img/Upload-toCloud-icon.png" style="position:absolute; left:42%; top:40%;">
                      <form action="/file-upload" class="dropzone" id="upload">
                        <span>拖入图片或点击上传</span>
                        <div class="fallback">
                          <input name="file" type="file" multiple />
                        </div>
                      </form>
                      <figure class="note"><strong>提示:</strong> 可以一次选择多个文件, 最多上传{{maxFiles}}个文件，且每个文件不大于{{maxFilesize}}MB!</figure>
                    </div>
                  </div>
                </section>

                <section id="property-features" class="block">
                  <section>
                    <header><h2><i class="fa fa-star-o"></i> 房屋配套</h2></header>
                    <ul class="submit-features">
                      {{#each arrayify facilities}}
                      <li>
                        <div class="checkbox">
                          <label>
                            <input type="checkbox" value="{{key}}" {{ifSelected key ../myProperty.facilities}} class="property-facility">{{value}}
                          </label>
                        </div>
                      </li>
                      {{/each}}
                    </ul>
                  </section>
                </section>
              </section>
            </div><!-- /.col-md-9 -->
            <div class="col-md-3 col-sm-3">
              <aside class="submit-step">
                <figure class="step-number">1</figure>
                <div class="description">
                  <h4>输入您的房产信息</h4>
                  <p>请尽可能准确地描述您的房产, 以便其他用户查找
                  </p>
                </div>
              </aside><!-- /.submit-step -->
            </div><!-- /.col-md-3 -->
          </div>
        </div><!-- /.row -->


        <div class="row">
          <div class="block">
            <div class="col-md-9 col-sm-9">
              <section id="property-contact">
                <section>
                  <header><h2><i class="fa fa-phone-square"></i> 联系方式</h2></header>
                  <div>
                    <div class="row">
                      <div class="col-md-4 col-sm-4">
                        <div class="form-group" id="contact-person-form-group">
                          <label for="">联系人 *</label>
                          <div class="input-group">
                            {{#if myProfile}}
                            <input type="text" class="form-control" value="{{myProfile.name}}" name="contact-person" >
                            {{else}}
                            <input type="text" class="form-control" value="{{myProperty.contact.name}}" name="contact-person" >
                            {{/if}}
                          </div>
                        </div><!-- /.form-group -->
                      </div><!-- /.col-md-4 -->

                      <div class="col-md-4 col-sm-4">
                        <div class="form-group" id="contact-number-form-group">
                          <label for="">联系电话 *</label>
                          <div class="input-group">
                            <span class="input-group-addon">+65</span>
                            {{#if myProfile}}
                            <input type="text" class="form-control" value="{{myProfile.phone}}" name="contact-number" >
                            {{else}}
                            <input type="text" class="form-control" value="{{myProperty.contact.phone}}" name="contact-number" >
                            {{/if}}
                          </div>
                        </div><!-- /.form-group -->
                      </div><!-- /.col-md-4 -->
                    </div>

                    <div class="row">
                      <div class="col-md-4 col-sm-4">
                        <div class="form-group" id="contact-qq-form-group">
                          <label for="">QQ</label>
                          <div class="input-group">
                            {{#if myProfile}}
                            <input type="text" class="form-control" value="{{myProfile.qq}}" name="contact-qq">
                            {{else}}
                            <input type="text" class="form-control" value="{{myProperty.contact.qq}}" name="contact-qq">
                            {{/if}}
                          </div>
                        </div><!-- /.form-group -->
                      </div><!-- /.col-md-4 -->

                      <div class="col-md-4 col-sm-4">
                        <div class="form-group" id="contact-wechat-form-group">
                          <label for="">微信 wechat</label>
                          <div class="input-group">
                            {{#if myProfile}}
                            <input type="text" class="form-control" value="{{myProfile.wechat}}" name="contact-wechat">
                            {{else}}
                            <input type="text" class="form-control" value="{{myProperty.contact.wechat}}" name="contact-wechat">
                            {{/if}}
                          </div>
                        </div><!-- /.form-group -->
                      </div><!-- /.col-md-4 -->

                      <div class="col-md-4 col-sm-4">
                        <div class="form-group" id="contact-email-form-group">
                          <label for="">Email</label>
                          <div class="input-group">
                            {{#if myProfile}}
                            <input type="text" class="form-control" value="{{myProfile.email.address}}" name="contact-email">
                            {{else}}
                            <input type="text" class="form-control" value="{{myProperty.contact.email}}" name="contact-email">
                            {{/if}}
                          </div>
                        </div><!-- /.form-group -->
                      </div><!-- /.col-md-4 -->

                    </div> <!-- row -->
                  </div>


                </section>
              </section>
            </div>
            <div class="col-md-3 col-sm-3">
              <aside class="submit-step">
                <figure class="step-number">2</figure>
                <div class="description">
                  <h4>联系方式</h4>
                  <p>请填写准确的联系方式以便对方即时联系您
                  </p>
                </div>
              </aside><!-- /.submit-step -->
            </div><!-- /.col-md-3 -->
          </div>
        </div>

        <hr>
        <div class="row">
          <div class="block">
            <div class="col-md-9 col-sm-9">
              <div class="center">
                <div class="form-group">
                  <button type="submit" class="btn btn-default large" style="width:30%">发布</button>
                </div><!-- /.form-group -->
                <figure class="note block">By clicking the “Proceed to Payment” or “Submit” button you agree with our <a href="terms-conditions.html">Terms and conditions</a></figure>
              </div>
            </div>
            <div class="col-md-3 col-sm-3">
              <aside class="submit-step">
                <figure class="step-number">3</figure>
                <div class="description">
                  <h4>核对信息</h4>
                  <p>请再次核对你所输入的信息，确认无误后请点击“发布”
                  </p>
                </div>
              </aside><!-- /.submit-step -->
            </div><!-- /.col-md-3 -->
          </div>
        </div>



      </form><!-- /#form-submit -->
    </div><!-- /.container -->
  </div>
</template>